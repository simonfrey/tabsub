class TabSub{constructor(){this.listeners={}}publish(t,e){const s=t+"_data",a=JSON.stringify([e,Date.now()]);localStorage.setItem(s,a);var n=new Event("storage");n.key=s,n.newValue=a,window.dispatchEvent(n)}state(t){const e=t+"_data",s=localStorage.getItem(e);if(null!=s)return JSON.parse(s)[0]}subscribe(t,e){null==this.listeners[t]&&(this.listeners[t]=[],window.addEventListener("storage",e=>{const s=t+"_data";if(e.key===s){const s=JSON.parse(e.newValue)[0];this.listeners[t].forEach((t,e)=>{t(s)})}},!1)),this.listeners[t].push(e)}}